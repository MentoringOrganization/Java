# ğŸ’¡ (10ì£¼ì°¨) ìë°” ì˜ˆìƒ ì§ˆë¬¸ ì •ë¦¬

## [ìë°” ê°ì²´ ì§€í–¥ì˜ ì›ë¦¬ì™€ ì´í•´]

## [ìŠ¤í”„ë§ ì…ë¬¸ - ì½”ë“œë¡œ ë°°ìš°ëŠ” ìŠ¤í”„ë§ ë¶€íŠ¸, ì›¹ MVC, DB ì ‘ê·¼ ê¸°ìˆ ]

## 1. ìŠ¤í”„ë§ ì‚¼ê°í˜• 3ìš”ì†Œ ì¤‘ í•˜ë‚˜ì¸ IoC/DIë€?

## 2. IoC(Inversion of Control)

### í”„ë¡œê·¸ë˜ë°ì—ì„œì˜ ì˜ì¡´ì„±ì´ë€?

í”„ë¡œê·¸ë˜ë°ì—ì„œ ì˜ì¡´ ê´€ê³„ëŠ” newë¡œ í‘œí˜„ëœë‹¤.

ì•„ë˜ì˜ ì˜ˆì‹œë¥¼ ë³´ì.

> ex. A í´ë˜ìŠ¤ê°€ B í´ë˜ìŠ¤ì— ì˜ì¡´í•˜ê³  ìˆëŠ” ê²½ìš°
```
class A {
    void someMethod() {
        B b = new B();
        b.doSomething();
    }
}
```
ê°ì²´ì§€í–¥ í”„ë¡œê·¸ë˜ë°ì—ì„œ **A í´ë˜ìŠ¤ê°€ B í´ë˜ìŠ¤ì˜ ê°ì²´ë¥¼ ìƒì„±('new B()')í•˜ê³  ì‚¬ìš©í•œë‹¤ëŠ” ê²ƒì€ A í´ë˜ìŠ¤ê°€ B í´ë˜ìŠ¤ì˜ íŠ¹ì • ë©”ì†Œë“œë‚˜ ì†ì„±ì— ì˜ì¡´**í•˜ê³  ìˆë‹¤ëŠ” ì˜ë¯¸ì´ë‹¤. ì¦‰, A í´ë˜ìŠ¤ì˜ ê¸°ëŠ¥ì´ B í´ë˜ìŠ¤ì˜ ê¸°ëŠ¥ì´ë‚˜ ìƒíƒœì— ì–´ë–¤ ë°©ì‹ìœ¼ë¡œë“  ì—°ê²°ë˜ì–´ ìˆë‹¤.

ìœ„ ì½”ë“œë¥¼ í†µí•´ ì‚´í´ë³´ìë©´, A í´ë˜ìŠ¤ì˜ someMethod() ë©”ì†Œë“œëŠ” B í´ë˜ìŠ¤ì˜ doSomething() ë©”ì†Œë“œì˜ ë™ì‘ì´ ë°”ë€Œê±°ë‚˜, ê·¸ ë©”ì†Œë“œê°€ ë” ì´ìƒ ì¡´ì¬í•˜ì§€ ì•Šê²Œ ë˜ë©´ A í´ë˜ìŠ¤ì˜ someMethod() ë©”ì†Œë“œëŠ” ì œëŒ€ë¡œ ë™ì‘í•˜ì§€ ì•Šê²Œ ëœë‹¤.

ìœ„ ë‚´ìš©ì„ í†µí•´ ì˜ì¡´ì„±, ì¦‰ IoC(Inversion of Control)ë¥¼ ì„¤ëª…í•  ìˆ˜ ìˆë‹¤.

## 3. DI(Dependency Injection)

**ê°ì²´ ì˜ì¡´ê´€ê³„ë¥¼ ì™¸ë¶€ì—ì„œ ë„£ì–´ì£¼ëŠ” ê°œë…**ìœ¼ë¡œì„œ ì˜ì¡´ì„± ì£¼ì…ì´ë¼ê³  í•œë‹¤.

DIì—ëŠ” í•„ë“œ ì£¼ì…, setter ì£¼ì…, ìƒì„±ì ì£¼ì…ì˜ 3ê°€ì§€ ë°©ë²•ì´ ì¡´ì¬í•˜ë©° ëŒ€í‘œì ìœ¼ë¡œ ìŠ¤í”„ë§ì—ì„œëŠ” ìŠ¤í”„ë§ ë¹ˆì„ ë“±ë¡í•˜ëŠ” ë°©ë²• 2ê°€ì§€ë¡œ í™•ì¸í•  ìˆ˜ ìˆë‹¤.

### 1. ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº”ê³¼ ìë™ ì˜ì¡´ê´€ê³„ ì„¤ì • = ìƒì„±ìë¥¼ í†µí•œ ì˜ì¡´ì„± ì£¼ì…

> ex. @Component ë° @Autowired
>> Controller.java
```
@Target(ElementType.TYPE)
@Retention(RetentionPolicy.RUNTIME)
@Documented
@Component
public @interface Controller {

	/**
	 * The value may indicate a suggestion for a logical component name,
	 * to be turned into a Spring bean in case of an autodetected component.
	 * @return the suggested component name, if any (or empty String otherwise)
	 */
	@AliasFor(annotation = Component.class)
	String value() default "";

}
```

> ex. íŒŒìƒëœ @Service, @Repository, @Controller ë° @Autowired
>> MemberController.java
```
package flab.hellospring.controller;

import flab.hellospring.service.MemberService;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Controller;

@Controller
public class MemberController {
    private final MemberService memberService;

    // Controllerì™€ Service ì—°ê²°
    // memberController(ê°ì²´)ê°€ ìƒì„±ë  ë•Œ, ìŠ¤í”„ë§ ë¹ˆì— ë“±ë¡ëœ memberService ê°ì²´ë¥¼ ë„£ì–´ì¤Œ
    @Autowired
    public MemberController(MemberService memberService) {
        this.memberService = memberService;
    }
}
```
![image](https://github.com/MentoringOrganization/Java/assets/103405457/6433d514-2ae7-483e-900c-3e0a57b25419)

ìœ„ì™€ ê°™ì´ ìƒì„±ì ì£¼ì… ë°©ì‹ì€ ì˜ì¡´ ê´€ê³„ê°€ ì‹¤í–‰ ì¤‘ì— ë™ì ìœ¼ë¡œ ë³€í•˜ëŠ” ê²½ìš°ëŠ” ê±°ì˜ ì—†ìœ¼ë¯€ë¡œ ì‹¤ì œ ì‹¤ë¬´ì—ì„œ ê¶Œì¥ë˜ëŠ” ë°©ì‹ì´ë‹¤.

ë˜í•œ @AutoWiredë¥¼ í†µí•œ DIëŠ” ìŠ¤í”„ë§ì´ ê´€ë¦¬í•˜ëŠ” ê°ì²´(ìœ„ ì½”ë“œì—ì„œëŠ” memberService)ì—ì„œë§Œ ë™ì‘í•œë‹¤. ì¦‰, ìŠ¤í”„ë§ ë¹ˆìœ¼ë¡œ ë“±ë¡í•˜ì§€ ì•Šê³  ì§ì ‘ ìƒì„±í•œ ê°ì²´ì—ì„œëŠ” ë™ì‘í•˜ì§€ ì•ŠëŠ”ë‹¤.

ì´ ë°–ì—ë„ ì†ì„±ì„ í†µí•œ ì˜ì¡´ì„± ì£¼ì…, XML íŒŒì¼ì„ ì‚¬ìš©í•œ ì˜ì¡´ì„± ì£¼ì…, ìŠ¤í”„ë§ ì„¤ì • íŒŒì¼ì—ì„œ ì†ì„± ì£¼ì… ë“±ì˜ ë°©ë²•ì´ ìˆë‹¤.

### 2. ìë°” ì½”ë“œë¡œ ì§ì ‘ ìŠ¤í”„ë§ ë¹ˆ ë“±ë¡í•˜ê¸°

>> SpringConfig.java
```
package flab.hellospring;

import flab.hellospring.repository.MemberRepository;
import flab.hellospring.repository.MemoryMemberRepository;
import flab.hellospring.service.MemberService;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;

// ìŠ¤í”„ë§ ë¹ˆì— ì§ì ‘ ë“±ë¡
@Configuration
public class SpringConfig {

    @Bean
    public MemberService memberService() {
        // ìŠ¤í”„ë§ ë¹ˆì— ë“±ë¡ëœ memberRepositoryë¥¼ ë„£ì–´ì¤Œ = @Autowired
        return new MemberService(memberRepository());
    }

    @Bean
    public MemberRepository memberRepository() {
        // ì¸í„°í˜ì´ìŠ¤ê°€ ì•„ë‹Œ êµ¬í˜„ì²´ ê°ì²´ë¥¼ ìƒì„±
        return new MemoryMemberRepository();
    }
}
```

ìœ„ ë°©ë²•ì€ ìŠ¤í”„ë§ ì„¤ì • íŒŒì¼ì„ ë§Œë“  í›„, ìŠ¤í”„ë§ ë¹ˆì˜ ìƒì„± ë° ë“±ë¡ì— ê´€í•œ ì„¤ì •ì„ ì‘ì„±í•œ ì½”ë“œì´ë‹¤. 

ì¦‰, ìœ„ í´ë˜ìŠ¤ì˜ ë©”ì†Œë“œë“¤ì€ ë¹ˆ ê°ì²´ë¥¼ ìƒì„±í•˜ê³  í•´ë‹¹ ë¹ˆë“¤ ì‚¬ì´ì˜ ì˜ì¡´ ê´€ê³„ë¥¼ ì„¤ì •í•˜ëŠ” ì½”ë“œë¡œì¨ ë™ì¼í•˜ê²Œ ì˜ì¡´ì„± ì£¼ì…ì´ ê°œë…ì´ ì ìš©ëœ ê²ƒì„ ë³¼ ìˆ˜ ìˆë‹¤.

ì •ë¦¬í•˜ìë©´, ì‹¤ë¬´ì—ì„œëŠ” ìƒì„±ìë¥¼ í†µí•´ ì˜ì¡´ì„±ì„ ì£¼ì…í•˜ëŠ” ê²ƒì„ ê¶Œì¥í•˜ë©° ì£¼ë¡œ ì •í˜•í™”ëœ ì»¨íŠ¸ë¡¤ëŸ¬/ì„œë¹„ìŠ¤/ë¦¬í¬ì§€í† ë¦¬ ê°™ì€ ì½”ë“œëŠ” ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº”ì„ ì‚¬ìš©í•œë‹¤. ê·¸ë¦¬ê³  ì •í˜•í™” ë˜ì§€ ì•Šê±°ë‚˜, ìƒí™©ì— ë”°ë¼ êµ¬í˜„ í´ë˜ìŠ¤ë¥¼ ë³€ê²½í•´ì•¼ í•˜ë©´ ì„¤ì •ì„ í†µí•´ ìŠ¤í”„ë§ ë¹ˆìœ¼ë¡œ ë“±ë¡í•œë‹¤.

## 4. AOP(Aspect Oriented Programming)ì´ë€?

AOPëŠ” **ê´€ì  ì§€í–¥ í”„ë¡œê·¸ë˜ë°**ìœ¼ë¡œì„œ, ì–´ë–¤ ë¡œì§ì„ ê¸°ì¤€ìœ¼ë¡œ í•µì‹¬ì ì¸ ê´€ì ê³¼ ë¶€ê°€ì ì¸ ê´€ì ìœ¼ë¡œ ë‚˜ëˆ„ì–´ì„œ ë³´ê³  ê·¸ ê´€ì ì„ ê¸°ì¤€ìœ¼ë¡œ ëª¨ë“ˆí™”ë¥¼ ì§„í–‰í•œë‹¤ëŠ” ê°œë…ì´ë‹¤.

ì¦‰, **ê³µí†µ ê´€ì‹¬ ì‚¬í•­(cross-cutting concern) vs í•µì‹¬ ê´€ì‹¬ ì‚¬í•­(core concern)ì˜ ë¶„ë¦¬**ë¡œ ì´í•´í•  ìˆ˜ ìˆë‹¤.

ìŠ¤í”„ë§ì—ì„œ AOPëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤.
![image](https://github.com/MentoringOrganization/Java/assets/103405457/21bc42b2-1136-4c38-ac33-ec387e412cba)

>> TimeTraceAop.java
```
package hello.hellospring.aop;

import org.aspectj.lang.ProceedingJoinPoint;
import org.aspectj.lang.annotation.Around;
import org.aspectj.lang.annotation.Aspect;
import org.springframework.stereotype.Component;

@Component
@Aspect
public class TimeTraceAop {
    @Around("execution(* hello.hellospring..*(..))")
    public Object execute(ProceedingJoinPoint joinPoint) throws Throwable {
        long start = System.currentTimeMillis();
        System.out.println("START: " + joinPoint.toString());
        try {
            return joinPoint.proceed();
        } finally {
            long finish = System.currentTimeMillis();
            long timeMs = finish - start;
            System.out.println("END: " + joinPoint.toString()+ " " + timeMs +
                    "ms");
        }
    }
}
```

ìœ„ ê³¼ì •ì€ íšŒì› ê°€ì…, íšŒì› ì¡°íšŒ ë“± í•µì‹¬ ê´€ì‹¬ ì‚¬í•­(core concern)ê³¼ ì‹œê°„ì„ ì¸¡ì •í•˜ëŠ” ê³µí†µ ê´€ì‹¬ ì‚¬í•­(cross-cutting concern)ì„ ë¶„ë¦¬í•˜ì˜€ìœ¼ë©° ì‹œê°„ì„ ì¸¡ì •í•˜ëŠ” ë¡œì§ì„ ë³„ë„ì˜ ê³µí†µ ë¡œì§ìœ¼ë¡œ ë§Œë“¤ì—ˆë‹¤.

ìœ„ í´ë˜ìŠ¤(íŒŒì¼)ë¥¼ ìƒì„±í•¨ìœ¼ë¡œì¨ ë‹¤ìŒê³¼ ê°™ì€ ì¥ì ì´ ì¡´ì¬í•œë‹¤.

- í•µì‹¬ ê´€ì‹¬ ì‚¬í•­ì„ ê¹”ë”í•˜ê²Œ ìœ ì§€í•  ìˆ˜ ìˆë‹¤.
- ë³€ê²½ì´ í•„ìš”í•˜ë©´ ì´ ë¡œì§ë§Œ ë³€ê²½í•˜ë©´ ëœë‹¤.
- ì›í•˜ëŠ” ì ìš© ëŒ€ìƒì„ ì„ íƒí•  ìˆ˜ ìˆë‹¤.

![image](https://github.com/MentoringOrganization/Java/assets/103405457/52fa119a-092f-41f7-8d27-e302e2accdd2)

## [ìŠ¤í”„ë§ í•µì‹¬ ì›ë¦¬ - ê¸°ë³¸í¸]
